/**
 * Javascript Persian Date Extension  
 * (c) 2018 Iman Farahi
 * MIT Licensed.
 * persiandate-0.0.1.js
 * website: http://professionalprogrammer.ir
 * email: professionalprogrammer.ir@gmail.com
 */
Date.prototype.toJalali=function(){var t,e,a,r,n,s,o;return t=this.getFullYear(),e=this.getMonth()+1,a=this.getDate(),n=[0,31,59,90,120,151,181,212,243,273,304,334],1600<t?(s=979,t-=1600):(s=0,t-=621),r=2<e?t+1:t,o=365*t+parseInt((r+3)/4)-parseInt((r+99)/100)+parseInt((r+399)/400)-80+a+n[e-1],s+=33*parseInt(o/12053),o%=12053,s+=4*parseInt(o/1461),365<(o%=1461)&&(s+=parseInt((o-1)/365),o=(o-1)%365),[s,o<186?1+parseInt(o/31):7+parseInt((o-186)/30),1+(o<186?o%31:(o-186)%30)]},Date.prototype.jalaliToDate=function(t,e,a){var r,n,s,o,i;for(979<t?(r=1600,t-=979):r=621,o=365*t+8*parseInt(t/33)+parseInt((t%33+3)/4)+78+a+(e<7?31*(e-1):30*(e-7)+186),r+=400*parseInt(o/146097),36524<(o%=146097)&&(r+=100*parseInt(--o/36524),365<=(o%=36524)&&o++),r+=4*parseInt(o/1461),365<(o%=1461)&&(r+=parseInt((o-1)/365),o=(o-1)%365),s=o+1,i=[0,31,r%4==0&&r%100!=0||r%400==0?29:28,31,30,31,30,31,31,30,31,30,31],n=0;n<13&&(v=i[n],!(s<=v));n++)s-=v;return this.setFullYear(r)&&this.setMonth(n)&&this.setDate(s)&&this},Date.prototype.jLeap=function(t){return 682*((t-(0<t?474:473))%2820+474+38)%2816<682},Date.prototype.leap=function(){return this.getFullYear()%4==0&&!(this.getFullYear()%100==0&&this.getFullYear()%400!=0)},Date.prototype.jGetDay=function(){return this.getDay()+2===8?1:this.getDay()+2===7?7:this.getDay()+2},Date.prototype.jDaysInMonth=function(t,e){return e<1||12<e?0:e<7?31:e<12?30:leap_persian(t)?30:29},Date.prototype.addDays=function(t){return this.setTime(864e5*t+this.valueOf())&&this},Date.prototype.addWeek=function(t){return this.setTime(6048e5*t+this.valueOf())&&this},Date.prototype.startOfWeek=function(t){return this.addDays(this.getDay()<6?-1*this.getDay()-t:0)&&this},Date.prototype.jStartOfWeek=function(){return this.startOfWeek(1)},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.jGetDaysOfWeek=function(t){var e=this.clone().jStartOfWeek().addWeek(t);return[e,e.clone().addDays(1),e.clone().addDays(2),e.clone().addDays(3),e.clone().addDays(4),e.clone().addDays(5),e.clone().addDays(6)]},Date.prototype.jFormat=function(t){return _format(t,this,"fa")||this};var formatStringRE=new RegExp("(([a-zA-Z])\\2*)|(\\((('.*?'|\\(.*?\\)|.)*?)\\))|('(.*?)')"),locales={fa:{monthNames:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],monthNamesShort:["فرو","ارد","خرد","تیر","مرد","شهر","مهر","آبا","آذر","دی","بهم","اسف"],dayNames:["شنبه","یکشنبه","دوشنبه","سه شنبه","چهار شنبه","پنج‌شنبه","جمعه"],dayNamesShort:["ش","ی","د","س","چ","پ","ج"]}};function _zeroDel(t){return parseInt(t.replace(/\D/g,""),10)}function _zeroPad(t,e){for(e=e||2,t+="";t.length<e;)t="0"+t;return t}function _format(t,e,a){for(var r,n,s="";r=t.match(formatStringRE);)s+=t.substr(0,r.index),r[1]?s+=_processTokenString(r[1],e,a):r[3]?_zeroDel(n=_format(r[4],e,a))&&(s+=n):s+=r[7]||"'",t=t.substr(r.index+r[0].length);return s+t}function _processTokenString(t,e,a){for(var r,n=t.length,s="";0<n;)void 0!==(r=_getTokenReplacement(t.substr(0,n),e,a))?(s+=r,n=(t=t.substr(n)).length):n--;return s+t}function _getTokenReplacement(t,e,a){if("fa"==a)switch(t){case"d":return e.toJalali()[2];case"dd":return _zeroPad(e.toJalali()[2]);case"ddd":return locales.fa.dayNamesShort[e.jGetDay()];case"dddd":return locales.fa.dayNames[e.jGetDay()];case"M":return e.toJalali()[1];case"MM":return _zeroPad(e.toJalali()[1]);case"MMM":return locales.fa.monthNamesShort[e.jGetDay()];case"MMMM":return locales.fa.monthNames[e.jGetDay()];case"yy":return parseInt((e.toJalali()[0]+"").substring(2));case"yyyy":return e.toJalali()[0]}}